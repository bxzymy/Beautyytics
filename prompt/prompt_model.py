# ======================
# 美妆行业销售分析Prompt库
# 使用说明：
#   1. 导入所需模板函数
#   2. 调用函数并传入参数
#   3. 将返回的Prompt与用户问题合并发送给LLM
# ======================

class BeautyAnalyticsPrompts:

    @staticmethod
    def descriptive_analysis(
            time_period: str = "2024年Q1-Q2",
            product_categories: list = ["护肤", "彩妆", "香水"],
            channels: list = ["天猫", "抖音", "线下专柜"]
    ) -> str:
        """
        描述性分析模板：基础销售数据统计
        适用场景：业绩概览、月报/季报生成
        """
        return f"""
作为资深美妆行业分析师，请基于以下维度对销售情况进行全面扫描分析：
1. 产品维度（按{', '.join(product_categories)}类目统计）：
   - 销售额绝对值与市场份额
   - 环比增长率（较上周期）
   - 退货率TOP3单品分析
2. 渠道维度（{', '.join(channels)}平台表现）：
   - 各渠道GMV占比与客单价对比
   - 渠道增长效率指数（流量成本 vs 转化率）
3. 用户维度：
   - 新老客户贡献占比（验证二八法则）
   - 地域分布热力图（一线城市 vs 下沉市场）
4. 可视化输出要求：
   - 组合趋势图：销售额与毛利双Y轴曲线
   - 表格：Top10爆品清单，包含SKU、单价、复购率
   - 核心结论：用3句话总结关键发现，包含异常点预警
特别说明：
- 若数据存在缺失，请明确标注【需补充数据】，并说明缺失对分析的影响。
"""

    @staticmethod
    def diagnostic_analysis(
            problem: str = "销售额同比下滑20%",
            focus_area: str = "精华类目",
            time_comparison: str = "2023年同期"
    ) -> str:
        """
        诊断性分析模板：问题根因定位
        适用场景：业绩异常诊断、突发下跌分析
        """
        return f"""
请诊断美妆品牌【{focus_area}】在【{time_comparison}】期间出现的【{problem}】问题，具体要求如下：
1. 多维归因分析：
   a) 价格带穿透测试：重点分析主力价格段（200-500元）市占率变化趋势  
   b) 竞品对比矩阵：选取3个主要竞品，比较促销力度与新品节奏  
   c) 渠道健康度扫描：重点监控抖音自播间GPM（毛利率）波动情况
2. 用户行为深挖：
   - 流失客群画像：分析其消费层级、年龄分布及城市等级分布  
   - 客诉词云分析：利用NLP提取并排名前五的质量问题关键词
3. 供应链追溯：
   - 库存周转率异常检测  
   - 核心成分（如玻色因）供货稳定性评估
4. 输出要求：
   - 归因结论分三级：主因（权重≥50%）、次因（30%）、偶然因素（20%）  
   - 附带验证方案：建议设计2个AB测试以验证核心假设
"""

    @staticmethod
    def predictive_analysis(
            product_line: str = "抗衰护肤系列",
            forecast_period: str = "2024年Q3",
            key_drivers: list = ["节庆日数量", "社媒投放预算", "竞品上新节奏"]
    ) -> str:
        """
        预测性分析模板：未来业绩模拟
        适用场景：销售预测、预算制定
        """
        return f"""
请基于历史数据预测【{product_line}】在【{forecast_period}】的销售趋势，具体要求如下：
1. 建模框架：
   - 基础模型：时间序列分解（季节项 + 趋势项 + 残差项）
   - 增强因子：纳入{', '.join(key_drivers)}的回归系数分析
2. 美妆行业特定参数：
   - 大促杠杆率（如618、双11对GMV的放大效应）
   - KOL投放衰减曲线（爆款内容生命周期）
   - 天气敏感性参数（如UV指数对防晒品类的影响）
3. 输出交付物：
   a) 销售预测三区间：乐观、 中性、 悲观场景的数值预测  
   b) 敏感性分析表，示例格式：
        | 变量变动       | GMV影响 | 利润影响 |
        | -------------- | ------- | -------- |
        | 营销费用 +10%  | ?%      | ?%       |
        | 原料成本 +5%   | ?%      | ?%       |
   c) 拐点预警：识别可能突破库存警戒线的关键月份
"""

    @staticmethod
    def swot_analysis(
            brand_position: str = "国产中端护肤",
            core_competency: str = "植物萃取技术"
    ) -> str:
        """
        SWOT分析模板：竞争力评估
        适用场景：战略规划、竞对分析
        """
        return f"""
请为【{brand_position}】美妆品牌构建动态SWOT矩阵，具体内容如下：
优势（S）：
- 技术壁垒：{core_competency}专利覆盖率（请提供具体数据）
- 供应链：柔性生产能力（包含最小起订量/MOQ数据）
劣势（W）：
- 渠道短板：线下BA培训通过率（附带区域对比）
- 复购缺陷：会员半年留存率与行业标杆对比
机会（O）：
- 政策红利：海南免税渠道准入进度
- 成分趋势：纯净美妆（Clean Beauty）需求增长率
威胁（T）：
- 国际品牌：雅诗兰黛等主要竞品降价幅度监测
- 法规风险：新原料备案通过率下降趋势
输出要求：
- 每个维度至少提供两个量化证据（示例："天猫旗舰店搜索份额由Q1的12%下降至Q2的9%"）
- 生成战略四象限图，重点突出SO战略（优势+机会）的优先落地方案

"""

    @staticmethod
    def funnel_analysis(
            campaign_name: str = "夏日防晒企划",
            funnel_steps: list = ["广告曝光", "详情页访问", "加购", "支付成功"]
    ) -> str:
        """
        漏斗分析模板：转化路径优化
        适用场景：营销活动评估、用户路径优化
        """
        return f"""
请分析【{campaign_name}】活动的用户转化漏斗，具体要求如下：
1. 漏斗建模：
   - 步骤定义：{' → '.join(funnel_steps)}
   - 转化基准：对比行业均值与本品历史最佳值
2. 卡点诊断：
   - 对流失率超过40%的环节进行深度归因分析
   - 页面热力图分析，包括鼠标轨迹和停留时长
3. 场景化优化建议：
   - 黄金3秒原则：优化首屏信息密度方案
   - 信任体系建设：增加检测报告等信任内容露出位置
   - 流失挽回：制定购物车放弃用户的触达策略
4. 预测收益：
   - 若将【{funnel_steps[1]}】转化率提升5个百分点，预期GMV增加__万元
   - 详情页加载速度优化至1.5秒，可减少跳出率__%
"""

    @staticmethod
    def logic_tree(
            core_question: str = "如何提升高端线利润率",
            mcee_layers: int = 3
    ) -> str:
        """
        逻辑树模板：复杂问题拆解
        适用场景：战略议题分解、问题系统分析
        """
        return f"""
请基于MECE原则，拆解战略命题：【{core_question}】，具体要求如下：
第一层：核心维度  
- 开源（包含新客获取和老客增值）  
- 节流（包含供应链优化和运营提效）  
第二层：美妆行业特性  
├─ 新客获取：贵妇圈层渗透策略（如高端SPA合作）  
├─ 老客增值：定制化服务（如AI肤质测评与配方定制）  
├─ 供应链：包材成本拆解（例如玻璃瓶占总成本__%）  
└─ 运营：BA人效提升（如智能话术辅助）  
第三层：可执行项  
- 跨界合作：与奢侈品牌联名溢价方案  
- 成本管控：替代包材供应商比价表  
输出要求：  
- 确保各层级维度完全互斥且穷尽（MECE）  
- 末端节点标注实施优先级（高H、中M、低L）  
- 量化预期收益，例如每项措施对利润率的百分点贡献
"""

    @staticmethod
    def data_requirements_check() -> str:
        """
        数据就绪度检测模块
        说明：建议在所有Prompt前添加此模块
        """
        return """
**数据就绪度检测**：
[ ] 时间周期   [ ] 产品细分   [ ] 渠道数据  
[ ] 成本结构   [ ] 用户画像   [ ] 竞品数据
根据缺失情况自动调整分析深度（L1基础→L3深度）
"""